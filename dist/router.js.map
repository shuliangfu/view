{
  "version": 3,
  "sources": ["../src/router.ts"],
  "sourcesContent": ["/**\n * @dreamer/view \u2014 \u5185\u7F6E SPA \u8DEF\u7531\uFF08\u4E0D\u4F9D\u8D56 @dreamer/router/client\uFF09\n *\n * \u57FA\u4E8E History API \u7684\u5BA2\u6237\u7AEF\u8DEF\u7531\uFF0C\u652F\u6301\u65E0\u5237\u65B0\u8DF3\u8F6C\u3001\u8DEF\u7531\u8BA2\u9605\u3001\u94FE\u63A5\u62E6\u622A\u3001\n * \u8DEF\u7531\u5B88\u536B\uFF08\u524D\u7F6E/\u540E\u7F6E\uFF09\u3001404 \u515C\u5E95\u3001back/forward/go\u3001\u8DEF\u7531 meta\u3002\u4EC5 history \u6A21\u5F0F\u3002\n */\n\nimport type { VNode } from \"./types.ts\";\n\n/** \u524D\u7F6E\u5B88\u536B\u8FD4\u56DE\u503C\uFF1Afalse \u53D6\u6D88\u5BFC\u822A\uFF0Cstring \u91CD\u5B9A\u5411\u5230\u8BE5\u8DEF\u5F84\uFF0Ctrue/void \u653E\u884C */\nexport type RouteGuardResult =\n  | boolean\n  | string\n  | void\n  | Promise<boolean | string | void>;\n\n/** \u524D\u7F6E\u5B88\u536B\uFF1A(to, from) => \u653E\u884C/\u53D6\u6D88/\u91CD\u5B9A\u5411 */\nexport type RouteGuard = (\n  to: RouteMatch | null,\n  from: RouteMatch | null,\n) => RouteGuardResult;\n\n/** \u540E\u7F6E\u5B88\u536B\uFF1A\u5BFC\u822A\u5B8C\u6210\u540E\u6267\u884C\uFF0C\u7528\u4E8E\u57CB\u70B9\u3001\u6539 title \u7B49 */\nexport type RouteGuardAfter = (\n  to: RouteMatch | null,\n  from: RouteMatch | null,\n) => void | Promise<void>;\n\n/** \u662F\u5426\u5904\u4E8E\u6D4F\u89C8\u5668\u73AF\u5883\uFF08\u5B58\u5728 location / history\uFF09 */\nfunction hasHistory(): boolean {\n  try {\n    const g = globalThis as unknown as {\n      location?: unknown;\n      history?: unknown;\n    };\n    return typeof g.location !== \"undefined\" &&\n      typeof g.history !== \"undefined\";\n  } catch {\n    return false;\n  }\n}\n\n/**\n * \u5355\u6761\u8DEF\u7531\u914D\u7F6E\uFF1Apath \u652F\u6301\u52A8\u6001\u53C2\u6570 :param\uFF0C\u53EF\u9009 meta \u4F9B\u5B88\u536B\u6216\u5E03\u5C40\u4F7F\u7528\n * @example\n * { path: \"/\", component: () => <Home />, meta: { title: \"\u9996\u9875\" } }\n * { path: \"/user/:id\", component: (match) => <User id={match.params.id} /> }\n */\nexport interface RouteConfig {\n  /** \u8DEF\u5F84\u6A21\u5F0F\uFF0C\u652F\u6301 :param\uFF08\u5982 /user/:id\uFF09 */\n  path: string;\n  /** \u6E32\u67D3\u8BE5\u8DEF\u7531\u7684\u7EC4\u4EF6\uFF0C\u63A5\u6536\u5F53\u524D\u5339\u914D\u7ED3\u679C */\n  component: (match: RouteMatch) => VNode;\n  /** \u8DEF\u7531\u5143\u4FE1\u606F\uFF0C\u5982 title\u3001requiresAuth\uFF0C\u4F9B\u5B88\u536B\u6216\u5E03\u5C40\u8BFB\u53D6 */\n  meta?: Record<string, unknown>;\n}\n\n/**\n * \u5F53\u524D\u8DEF\u7531\u5339\u914D\u7ED3\u679C\uFF0C\u4F9B component \u4E0E\u5B88\u536B\u4F7F\u7528\n */\nexport interface RouteMatch {\n  /** \u5339\u914D\u5230\u7684\u8DEF\u7531 path \u6A21\u5F0F\uFF08\u5982 \"/user/:id\"\uFF09 */\n  path: string;\n  /** \u52A8\u6001\u53C2\u6570\uFF08\u5982 { id: \"123\" }\uFF09 */\n  params: Record<string, string>;\n  /** \u67E5\u8BE2\u53C2\u6570\uFF08\u5982 ?a=1 => { a: \"1\" }\uFF09 */\n  query: Record<string, string>;\n  /** \u5F53\u524D\u5B8C\u6574\u8DEF\u5F84\uFF08pathname\uFF09 */\n  fullPath: string;\n  /** \u6E32\u67D3\u8BE5\u8DEF\u7531\u7684\u7EC4\u4EF6 */\n  component: (match: RouteMatch) => VNode;\n  /** \u8BE5\u8DEF\u7531\u7684 meta\uFF08\u82E5\u914D\u7F6E\u4E86\uFF09 */\n  meta?: Record<string, unknown>;\n}\n\nexport interface CreateRouterOptions {\n  /** \u8DEF\u7531\u8868\uFF0C\u6309\u987A\u5E8F\u5339\u914D\uFF0C\u7B2C\u4E00\u4E2A\u5339\u914D\u6210\u529F\u5373\u8FD4\u56DE */\n  routes: RouteConfig[];\n  /** \u57FA\u7840\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u4E3A \"\"\uFF1B\u6240\u6709 path \u4F1A\u4E0E\u6B64\u62FC\u63A5\u540E\u518D\u5339\u914D */\n  basePath?: string;\n  /** \u662F\u5426\u5728 start() \u65F6\u62E6\u622A\u540C\u6E90 <a> \u70B9\u51FB\u505A\u5BA2\u6237\u7AEF\u5BFC\u822A\uFF0C\u9ED8\u8BA4 true */\n  interceptLinks?: boolean;\n  /** \u65E0\u5339\u914D\u65F6\u4F7F\u7528\u7684\u515C\u5E95\u8DEF\u7531\uFF08404 \u9875\uFF09\uFF0Cpath \u5EFA\u8BAE\u8BBE\u4E3A \"*\" */\n  notFound?: RouteConfig;\n  /** \u524D\u7F6E\u5B88\u536B\uFF1A\u5BFC\u822A\u524D\u6267\u884C\uFF0C\u8FD4\u56DE false \u53D6\u6D88\u3001string \u91CD\u5B9A\u5411\u3001true/void \u653E\u884C\uFF1B\u652F\u6301\u5F02\u6B65 */\n  beforeRoute?: RouteGuard | RouteGuard[];\n  /** \u540E\u7F6E\u5B88\u536B\uFF1A\u5BFC\u822A\u5B8C\u6210\u540E\u6267\u884C\uFF1B\u652F\u6301\u5F02\u6B65 */\n  afterRoute?: RouteGuardAfter | RouteGuardAfter[];\n  /** \u524D\u7F6E\u5B88\u536B\u6700\u5927\u91CD\u5B9A\u5411\u6B21\u6570\uFF0C\u9632\u6B62\u6B7B\u5FAA\u73AF\uFF0C\u9ED8\u8BA4 5 */\n  maxRedirects?: number;\n}\n\n/**\n * \u5C06\u8DEF\u7531 path \u6A21\u5F0F\u8F6C\u4E3A\u6B63\u5219\u4E0E\u53C2\u6570\u540D\u5217\u8868\uFF08\u4E0D\u5305\u542B basePath\uFF0C\u56E0\u5339\u914D\u65F6\u5DF2\u5BF9 strip base \u540E\u7684\u8DEF\u5F84\uFF09\n * \"/user/:id\" => { regex: /^\\/user\\/([^/]+)$/, paramNames: [\"id\"] }\n */\nfunction pathToRegex(pattern: string): { regex: RegExp; paramNames: string[] } {\n  const paramNames: string[] = [];\n  const segments = pattern.split(\"/\").filter(Boolean);\n  const parts = segments.map((seg) => {\n    if (seg.startsWith(\":\")) {\n      paramNames.push(seg.slice(1));\n      return \"([^/]+)\";\n    }\n    return seg.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n  });\n  const source = \"^/\" + (parts.length ? parts.join(\"/\") : \"\") + \"$\";\n  return { regex: new RegExp(source), paramNames };\n}\n\n/** \u89E3\u6790\u67E5\u8BE2\u5B57\u7B26\u4E32\u4E3A\u5BF9\u8C61 */\nfunction parseQuery(search: string): Record<string, string> {\n  const out: Record<string, string> = {};\n  if (!search || search === \"?\") return out;\n  const q = search.startsWith(\"?\") ? search.slice(1) : search;\n  for (const part of q.split(\"&\")) {\n    const [k, v] = part.split(\"=\").map(decodeURIComponent);\n    if (k) out[k] = v ?? \"\";\n  }\n  return out;\n}\n\n/** \u4ECE\u5F53\u524D location \u83B7\u53D6\u8981\u5339\u914D\u7684\u8DEF\u5F84\u4E0E\u67E5\u8BE2\u4E32\uFF08\u57FA\u4E8E pathname\uFF0Chistory \u6A21\u5F0F\uFF09 */\nfunction getCurrentPathAndQuery(options: { basePath: string }): {\n  path: string;\n  search: string;\n} {\n  const g = globalThis as unknown as {\n    location?: { pathname: string; search: string };\n  };\n  if (!g.location) return { path: \"\", search: \"\" };\n  let path = g.location.pathname || \"/\";\n  const search = g.location.search || \"\";\n  const base = options.basePath.replace(/\\/$/, \"\");\n  if (base && path.startsWith(base)) {\n    path = path.slice(base.length) || \"/\";\n  }\n  return { path, search };\n}\n\nexport interface Router {\n  /** \u83B7\u53D6\u5F53\u524D\u8DEF\u7531\u5339\u914D\u7ED3\u679C\uFF0C\u65E0\u5339\u914D\u4E14\u672A\u914D\u7F6E notFound \u65F6\u8FD4\u56DE null */\n  getCurrentRoute(): RouteMatch | null;\n  /** \u5C06 path \u8F6C\u4E3A\u5B8C\u6574 href\uFF08basePath + path\uFF09\uFF0C\u7528\u4E8E <a href> */\n  href(path: string): string;\n  /** \u5BFC\u822A\u5230 path\uFF08\u9ED8\u8BA4 pushState\uFF09\uFF0C\u4F1A\u6267\u884C\u524D\u7F6E/\u540E\u7F6E\u5B88\u536B\uFF0C\u8FD4\u56DE Promise */\n  navigate(path: string, replace?: boolean): Promise<void>;\n  /** \u66FF\u6362\u5F53\u524D\u5386\u53F2\u8BB0\u5F55\u5E76\u5BFC\u822A\uFF08\u7B49\u4EF7\u4E8E navigate(path, true)\uFF09 */\n  replace(path: string): Promise<void>;\n  /** \u6D4F\u89C8\u5668\u540E\u9000 */\n  back(): void;\n  /** \u6D4F\u89C8\u5668\u524D\u8FDB */\n  forward(): void;\n  /** \u6D4F\u89C8\u5668\u524D\u8FDB/\u540E\u9000\u6B65\u6570 */\n  go(delta: number): void;\n  /** \u8BA2\u9605\u8DEF\u7531\u53D8\u5316\uFF08navigate / \u6D4F\u89C8\u5668\u524D\u8FDB\u540E\u9000\uFF09\uFF0C\u8FD4\u56DE\u53D6\u6D88\u8BA2\u9605\u51FD\u6570 */\n  subscribe(callback: () => void): () => void;\n  /** \u542F\u52A8\uFF1A\u76D1\u542C popstate\uFF0C\u53EF\u9009\u62E6\u622A\u540C\u6E90 <a> \u70B9\u51FB */\n  start(): void;\n  /** \u505C\u6B62\uFF1A\u79FB\u9664\u6240\u6709\u76D1\u542C\u4E0E\u94FE\u63A5\u62E6\u622A */\n  stop(): void;\n}\n\n/**\n * \u521B\u5EFA SPA \u8DEF\u7531\u5668\u5B9E\u4F8B\uFF08\u4E0D\u4F9D\u8D56 @dreamer/router/client\uFF09\n *\n * @example\n * const router = createRouter({\n *   routes: [\n *     { path: \"/\", component: () => <Home /> },\n *     { path: \"/user/:id\", component: (m) => <User id={m.params.id} /> },\n *   ],\n * });\n * router.start();\n * // \u5728 createRoot \u4E2D\uFF1Aconst [match, setMatch] = createSignal(router.getCurrentRoute());\n * // router.subscribe(() => setMatch(router.getCurrentRoute()));\n * // \u6839\u7EC4\u4EF6\u6839\u636E match() \u6E32\u67D3 match()?.component(match()!)\n */\nexport function createRouter(options: CreateRouterOptions): Router {\n  const {\n    routes,\n    basePath = \"\",\n    interceptLinks = true,\n    notFound: notFoundOption,\n    beforeRoute: beforeRouteOption,\n    afterRoute: afterRouteOption,\n    maxRedirects = 5,\n  } = options;\n\n  const notFoundConfig = notFoundOption ?? null;\n  const beforeGuards = beforeRouteOption == null\n    ? []\n    : Array.isArray(beforeRouteOption)\n    ? beforeRouteOption\n    : [beforeRouteOption];\n  const afterGuards = afterRouteOption == null\n    ? []\n    : Array.isArray(afterRouteOption)\n    ? afterRouteOption\n    : [afterRouteOption];\n\n  const compiled = routes.map((r) => ({\n    ...r,\n    ...pathToRegex(r.path),\n  }));\n\n  const subscribers: Array<() => void> = [];\n  let clickHandler: ((e: Event) => void) | null = null;\n  let popstateHandler: (() => void) | null = null;\n\n  function getPathAndQuery(): { path: string; search: string } {\n    return getCurrentPathAndQuery({ basePath });\n  }\n\n  function matchPath(pathname: string, search: string): RouteMatch | null {\n    const path = pathname.replace(/\\?.*$/, \"\").replace(/#.*$/, \"\") || \"/\";\n    const query = parseQuery(search);\n\n    for (const r of compiled) {\n      const m = path.match(r.regex);\n      if (!m) continue;\n      const params: Record<string, string> = {};\n      r.paramNames.forEach((name, i) => {\n        params[name] = m[i + 1] ?? \"\";\n      });\n      return {\n        path: r.path,\n        params,\n        query,\n        fullPath: path + (search ? search : \"\"),\n        component: r.component,\n        meta: r.meta,\n      };\n    }\n    if (notFoundConfig) {\n      return {\n        path: notFoundConfig.path,\n        params: {},\n        query,\n        fullPath: path + (search ? search : \"\"),\n        component: notFoundConfig.component,\n        meta: notFoundConfig.meta,\n      };\n    }\n    return null;\n  }\n\n  function getCurrentRoute(): RouteMatch | null {\n    const { path, search } = getPathAndQuery();\n    return matchPath(path, search);\n  }\n\n  function notify(): void {\n    subscribers.forEach((cb) => cb());\n  }\n\n  /** \u6839\u636E path \u4E0E search \u8BA1\u7B97\u5373\u5C06\u8FDB\u5165\u7684 RouteMatch\uFF08\u7528\u4E8E\u5B88\u536B\u7684 to\uFF09 */\n  function resolveMatch(path: string, search: string): RouteMatch | null {\n    const p = path.replace(/\\?.*$/, \"\").replace(/#.*$/, \"\") || \"/\";\n    return matchPath(p, search);\n  }\n\n  async function navigate(\n    path: string,\n    replace = false,\n    redirectDepth = 0,\n  ): Promise<void> {\n    if (!hasHistory()) return;\n    if (redirectDepth > maxRedirects) return;\n\n    const from = getCurrentRoute();\n    const pathNorm = path.startsWith(\"/\") ? path : \"/\" + path;\n    const to = resolveMatch(pathNorm, \"\");\n\n    for (const guard of beforeGuards) {\n      const result = await Promise.resolve(guard(to, from));\n      if (result === false) return;\n      if (typeof result === \"string\") {\n        await navigate(result, replace, redirectDepth + 1);\n        return;\n      }\n    }\n\n    const g = globalThis as unknown as {\n      history?: {\n        pushState: (a: unknown, b: string, c: string) => void;\n        replaceState: (a: unknown, b: string, c: string) => void;\n      };\n      location?: { pathname: string; origin: string; search: string };\n    };\n    const base = basePath.replace(/\\/$/, \"\") || \"\";\n    const url = `${g.location?.origin ?? \"\"}${base}${pathNorm}`;\n\n    try {\n      if (replace) {\n        g.history?.replaceState(null, \"\", url);\n      } else {\n        g.history?.pushState(null, \"\", url);\n      }\n      notify();\n\n      const toAfter = getCurrentRoute();\n      for (const guard of afterGuards) {\n        await Promise.resolve(guard(toAfter, from));\n      }\n    } catch {\n      // \u8DE8\u57DF\u6216\u5B89\u5168\u9650\u5236\u65F6\u53EF\u80FD\u629B\u9519\uFF0C\u5FFD\u7565\n    }\n  }\n\n  /** \u5C06 path \u8F6C\u4E3A\u5B8C\u6574 href\uFF08basePath + path\uFF09 */\n  function href(path: string): string {\n    const pathNorm = path.startsWith(\"/\") ? path : \"/\" + path;\n    const base = basePath.replace(/\\/$/, \"\") || \"\";\n    return `${base}${pathNorm}`;\n  }\n\n  function replace(path: string): Promise<void> {\n    return navigate(path, true);\n  }\n\n  function back(): void {\n    const g = globalThis as unknown as { history?: { back: () => void } };\n    g.history?.back();\n  }\n\n  function forward(): void {\n    const g = globalThis as unknown as { history?: { forward: () => void } };\n    g.history?.forward();\n  }\n\n  function go(delta: number): void {\n    const g = globalThis as unknown as {\n      history?: { go: (n: number) => void };\n    };\n    g.history?.go(delta);\n  }\n\n  function subscribe(callback: () => void): () => void {\n    subscribers.push(callback);\n    return () => {\n      const i = subscribers.indexOf(callback);\n      if (i !== -1) subscribers.splice(i, 1);\n    };\n  }\n\n  function start(): void {\n    if (!hasHistory()) return;\n\n    const g = globalThis as unknown as {\n      addEventListener?: (type: string, fn: () => void) => void;\n      removeEventListener?: (type: string, fn: () => void) => void;\n      document?: {\n        addEventListener: (type: string, fn: (e: Event) => void) => void;\n        removeEventListener: (type: string, fn: (e: Event) => void) => void;\n      };\n    };\n\n    popstateHandler = () => notify();\n    g.addEventListener?.(\"popstate\", popstateHandler);\n\n    if (interceptLinks && g.document) {\n      clickHandler = (e: Event) => {\n        const target = (e as MouseEvent).target as HTMLElement | null;\n        const a = target?.closest?.(\"a\");\n        if (\n          !a || (e as MouseEvent).ctrlKey || (e as MouseEvent).metaKey ||\n          (e as MouseEvent).shiftKey || (e as MouseEvent).button !== 0\n        ) return;\n        const href = a.getAttribute(\"href\");\n        if (!href || href.startsWith(\"mailto:\") || href.startsWith(\"tel:\")) {\n          return;\n        }\n        if (href.startsWith(\"#\")) return; // \u951A\u70B9\u4E0D\u62E6\u622A\n        try {\n          const url = new URL(href, globalThis.location?.href);\n          if (url.origin !== globalThis.location?.origin) return;\n          e.preventDefault();\n          const path = url.pathname + url.search;\n          navigate(path.startsWith(\"/\") ? path : \"/\" + path);\n        } catch {\n          // \u65E0\u6548 URL \u4E0D\u62E6\u622A\n        }\n      };\n      g.document.addEventListener(\"click\", clickHandler);\n    }\n  }\n\n  function stop(): void {\n    const g = globalThis as unknown as {\n      removeEventListener?: (type: string, fn: () => void) => void;\n      document?: {\n        removeEventListener: (type: string, fn: (e: Event) => void) => void;\n      };\n    };\n    if (popstateHandler) {\n      g.removeEventListener?.(\"popstate\", popstateHandler);\n      popstateHandler = null;\n    }\n    if (clickHandler && g.document) {\n      g.document.removeEventListener(\"click\", clickHandler);\n      clickHandler = null;\n    }\n  }\n\n  return {\n    getCurrentRoute,\n    href,\n    navigate,\n    replace,\n    back,\n    forward,\n    go,\n    subscribe,\n    start,\n    stop,\n  };\n}\n"],
  "mappings": "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",
  "names": ["hasHistory", "g", "pathToRegex", "pattern", "paramNames", "parts", "seg", "source", "parseQuery", "search", "out", "q", "part", "k", "v", "getCurrentPathAndQuery", "options", "path", "base", "createRouter", "routes", "basePath", "interceptLinks", "notFoundOption", "beforeRouteOption", "afterRouteOption", "maxRedirects", "notFoundConfig", "beforeGuards", "afterGuards", "compiled", "r", "subscribers", "clickHandler", "popstateHandler", "getPathAndQuery", "matchPath", "pathname", "query", "m", "params", "name", "i", "getCurrentRoute", "notify", "cb", "resolveMatch", "p", "navigate", "replace", "redirectDepth", "from", "pathNorm", "to", "guard", "result", "url", "toAfter", "href", "back", "forward", "go", "delta", "subscribe", "callback", "start", "e", "a", "stop"]
}
