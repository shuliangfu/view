{
  "version": 3,
  "sources": ["../src/dom/shared.ts", "../src/signal.ts", "../src/boundary.ts", "../src/directive.ts", "../src/context.ts", "../src/dom/stringify.ts", "../src/stream.ts"],
  "sourcesContent": ["/**\n * View \u6A21\u677F\u5F15\u64CE \u2014 DOM \u5C42\u5171\u4EAB\u7C7B\u578B\u4E0E\u5DE5\u5177\n *\n * Fragment\u3001IfContext\u3001SSROptions\u3001isFragment\u3001isVNodeLike \u7B49\uFF0C\u4F9B element / stringify / hydrate \u590D\u7528\n */\n\nimport type { VNode } from \"../types.ts\";\n\n/** Fragment \u7684 type \u6807\u8BB0\uFF0C\u4E0D\u521B\u5EFA\u771F\u5B9E\u8282\u70B9\uFF0C\u4EC5\u7528\u4E8E\u5305\u88F9\u5B50\u8282\u70B9 */\nexport const FragmentType = Symbol.for(\"view.fragment\");\n\n/** \u5224\u65AD\u662F\u5426\u4E3A Fragment \u8282\u70B9 */\nexport function isFragment(vnode: VNode): boolean {\n  return vnode.type === FragmentType || (vnode.type as unknown) === \"Fragment\";\n}\n\n/** v-if / v-else \u5144\u5F1F\u94FE\u7684\u4E0A\u4E0B\u6587\uFF0C\u7528\u4E8E vElse \u5224\u65AD\u201C\u4E0A\u4E00\u4E2A vIf \u662F\u5426\u4E3A false\u201D */\nexport type IfContext = { lastVIf: boolean };\n\n/**\n * SSR \u9009\u9879\uFF1AallowRawHtml \u4E3A false \u65F6 v-html / dangerouslySetInnerHTML \u8F93\u51FA\u8F6C\u4E49\u6587\u672C\uFF08\u5B89\u5168\u573A\u666F\uFF09\n * \u9ED8\u8BA4\u670D\u52A1\u7AEF v-html \u540C\u6837\u4E0D\u8F6C\u4E49\uFF0C\u4E0E\u5BA2\u6237\u7AEF\u4E00\u81F4\uFF1B\u82E5\u9700\u7981\u6B62\u539F\u59CB HTML \u53EF\u4F20 allowRawHtml: false\n */\nexport type SSROptions = { allowRawHtml?: boolean };\n\n/** \u5224\u65AD\u662F\u5426\u5F62\u5982 VNode\uFF08\u542B type\u3001props\uFF09 */\nexport function isVNodeLike(x: unknown): boolean {\n  return typeof x === \"object\" && x !== null && \"type\" in x && \"props\" in x;\n}\n", "/**\n * View \u6A21\u677F\u5F15\u64CE \u2014 Signal\uFF08\u4FE1\u53F7\uFF09\n *\n * \u7EC6\u7C92\u5EA6\u54CD\u5E94\u5F0F\u5355\u5143\uFF1Agetter \u8BFB\u503C\u5E76\u767B\u8BB0\u5F53\u524D effect \u4E3A\u4F9D\u8D56\uFF0Csetter \u6539\u503C\u5E76\u901A\u77E5\u6240\u6709\u4F9D\u8D56\u7684 effect \u6267\u884C\u3002\n * \u901A\u77E5\u901A\u8FC7\u8C03\u5EA6\u5668\u5F02\u6B65\u6267\u884C\uFF0C\u907F\u514D effect \u5185\u300C\u8BFB\u2192\u5199\u300D\u5BFC\u81F4\u540C\u6B65\u91CD\u5165\u5361\u6B7B\u4E3B\u7EBF\u7A0B\u3002\n */\n\nimport { schedule } from \"./scheduler.ts\";\n\n/** \u5F53\u524D\u6B63\u5728\u6267\u884C\u7684 effect\uFF08run \u51FD\u6570\uFF09\uFF0C\u7528\u4E8E\u4F9D\u8D56\u6536\u96C6\uFF1Brun \u4E0A\u53EF\u6302 _subscriptionSets \u4F9B\u6E05\u7406 */\ntype EffectRun = (() => void) & { _subscriptionSets?: Subscriber[] };\nlet currentEffect: EffectRun | null = null;\n\n/**\n * \u5728 effect \u6267\u884C\u671F\u95F4\u8C03\u7528\uFF0C\u7528\u4E8E\u5C06\u5F53\u524D effect \u8BBE\u4E3A\u300C\u6B63\u5728\u6267\u884C\u300D\u4EE5\u4FBF signal \u7684 getter \u80FD\u767B\u8BB0\u4F9D\u8D56\n * @internal \u7531 effect.ts \u7684 createEffect \u4F7F\u7528\n */\nexport function setCurrentEffect(effect: (() => void) | null): void {\n  currentEffect = effect as EffectRun | null;\n}\n\n/**\n * \u83B7\u53D6\u5F53\u524D\u6B63\u5728\u6267\u884C\u7684 effect\n * @internal\n */\nexport function getCurrentEffect(): (() => void) | null {\n  return currentEffect;\n}\n\n/** \u5355\u4E2A signal \u7684\u8BA2\u9605\u8005\uFF08effect \u7684\u91CD\u65B0\u6267\u884C\u51FD\u6570\uFF09\u5217\u8868 */\ntype Subscriber = Set<() => void>;\n\n/**\n * \u521B\u5EFA\u54CD\u5E94\u5F0F\u4FE1\u53F7\n *\n * @param initialValue \u521D\u59CB\u503C\n * @returns [getter, setter] \u5143\u7EC4\uFF1Agetter \u8BFB\u503C\u5E76\u767B\u8BB0\u4F9D\u8D56\uFF0Csetter \u5199\u503C\u5E76\u901A\u77E5\u4F9D\u8D56\n *\n * @example\n * const [count, setCount] = createSignal(0);\n * createEffect(() => console.log(count())); // \u6BCF\u6B21 setCount \u540E\u90FD\u4F1A\u6253\u5370\n * setCount(1);\n */\nexport function createSignal<T>(\n  initialValue: T,\n): [() => T, (value: T | ((prev: T) => T)) => void] {\n  let value = initialValue;\n  const subscribers: Subscriber = new Set();\n\n  const getter = (): T => {\n    if (currentEffect) {\n      subscribers.add(currentEffect);\n      if (currentEffect._subscriptionSets) {\n        currentEffect._subscriptionSets.push(subscribers);\n      }\n    }\n    return value;\n  };\n\n  const setter = (next: T | ((prev: T) => T)): void => {\n    const nextValue = typeof next === \"function\"\n      ? (next as (prev: T) => T)(value)\n      : next;\n    if (Object.is(value, nextValue)) {\n      return;\n    }\n    value = nextValue;\n    subscribers.forEach((run) => schedule(run));\n  };\n\n  return [markSignalGetter(getter), setter];\n}\n\n/**\n * \u5224\u65AD\u4E00\u4E2A\u51FD\u6570\u662F\u5426\u4E3A view \u7684 signal getter\uFF08\u7528\u4E8E dom \u5C42\u533A\u5206\u300C\u9700\u54CD\u5E94\u5F0F\u7ED1\u5B9A\u7684 prop\u300D\u4E0E\u666E\u901A\u51FD\u6570\u5982\u4E8B\u4EF6\u5904\u7406\uFF09\n * \u901A\u8FC7 getter \u4E0A\u6302\u8F7D\u7684\u6807\u8BB0\u5224\u65AD\u3002\n */\nexport const SIGNAL_GETTER_MARKER = Symbol.for(\"view.signalGetter\");\n\n/** \u7ED9 getter \u6253\u6807\u8BB0\uFF0C\u4F9B isSignalGetter \u4F7F\u7528 */\nexport function markSignalGetter<T>(getter: () => T): () => T {\n  (getter as unknown as { [SIGNAL_GETTER_MARKER]: true })[\n    SIGNAL_GETTER_MARKER\n  ] = true;\n  return getter;\n}\n\nexport function isSignalGetter(fn: unknown): fn is () => unknown {\n  return typeof fn === \"function\" &&\n    (fn as unknown as { [SIGNAL_GETTER_MARKER]?: boolean })[\n        SIGNAL_GETTER_MARKER\n      ] === true;\n}\n", "/**\n * @dreamer/view/boundary \u2014 \u6309\u9700\u5BFC\u5165\n *\n * \u4EC5\u4FDD\u7559 Suspense\u3001ErrorBoundary\u3002\u6761\u4EF6/\u5217\u8868\u6E32\u67D3\u8BF7\u7528\u6307\u4EE4\uFF1Av-if / v-else / v-else-if / v-for\u3002\n * Suspense \u652F\u6301 Promise \u5B50\u8282\u70B9\uFF1BErrorBoundary \u6355\u83B7\u5B50\u6811\u9519\u8BEF\u3002\n */\n\nimport { createEffect } from \"./effect.ts\";\nimport { createSignal, markSignalGetter } from \"./signal.ts\";\nimport { Fragment, jsx } from \"./jsx-runtime.ts\";\nimport type { VNode } from \"./types.ts\";\n\nfunction valueOf<T>(v: T | (() => T)): T {\n  return typeof v === \"function\" ? (v as () => T)() : v;\n}\n\n/** ErrorBoundary \u7EC4\u4EF6\u5F15\u7528\uFF0C\u4F9B dom \u505A try/catch \u65F6\u8BC6\u522B */\nexport function isErrorBoundary(\n  component: (props: Record<string, unknown>) => VNode | VNode[] | null,\n): boolean {\n  return component === ErrorBoundary;\n}\n\n/** \u4ECE ErrorBoundary \u7684 props \u4E2D\u53D6 fallback \u51FD\u6570\uFF1A(error) => VNode */\nexport function getErrorBoundaryFallback(\n  props: Record<string, unknown>,\n): (error: unknown) => VNode {\n  const fb = props.fallback;\n  if (typeof fb === \"function\") return fb as (error: unknown) => VNode;\n  const vnode: VNode = (fb != null && typeof fb === \"object\" && \"type\" in fb)\n    ? fb as VNode\n    : { type: \"#text\", props: { nodeValue: String(fb) }, children: [] };\n  return () => vnode;\n}\n\n/**\n * \u9519\u8BEF\u8FB9\u754C\uFF1A\u6355\u83B7\u5B50\u6811\u6E32\u67D3\u4E2D\u7684\u9519\u8BEF\uFF0C\u663E\u793A fallback(error)\n * \u4EC5\u6355\u83B7\u5B50\u7EC4\u4EF6\u6267\u884C\u6216\u5B50 VNode \u521B\u5EFA\u65F6\u7684\u540C\u6B65\u9519\u8BEF\u3002\n */\nexport function ErrorBoundary(props: {\n  fallback: (error: unknown) => VNode;\n  children?: VNode | VNode[] | (() => VNode | VNode[]);\n}): VNode | VNode[] | null {\n  return (props.children ?? null) as VNode | VNode[] | null;\n}\n\n/**\n * \u5F02\u6B65\u8FB9\u754C\uFF1Achildren \u4E3A Promise<VNode> \u6216 getter \u8FD4\u56DE Promise \u65F6\u5148\u663E\u793A fallback\uFF0Cresolve \u540E\u663E\u793A\u5185\u5BB9\n * \u4E0E createResource \u914D\u5408\uFF1Aresource().loading \u65F6\u663E\u793A fallback\uFF0C\u6709 data \u65F6\u663E\u793A\u5185\u5BB9\n */\nexport function Suspense(props: {\n  fallback: VNode | (() => VNode);\n  children: VNode | (() => VNode) | (() => Promise<VNode>) | Promise<VNode>;\n}): VNode {\n  const [resolved, setResolved] = createSignal<VNode | null>(null);\n  /** \u6BCF\u6B21 effect \u8FD0\u884C\u9012\u589E\uFF1Bdispose \u65F6\u7F6E\u4E3A -1\uFF0CPromise \u56DE\u8C03\u4EC5\u5F53 gen === generation \u65F6\u624D setResolved\uFF0C\u907F\u514D unmount \u540E\u6216\u65E7 run \u7684 promise \u8BEF\u66F4\u65B0 */\n  let generation = 0;\n  createEffect(() => {\n    const gen = ++generation;\n    const c = valueOf(props.children);\n    if (c != null && typeof (c as Promise<unknown>).then === \"function\") {\n      (c as Promise<VNode>).then((v) => {\n        if (gen === generation) setResolved(v ?? null);\n      });\n    } else {\n      setResolved((c as VNode) ?? null);\n    }\n    return () => {\n      generation = -1;\n    };\n  });\n  const getter = () => resolved() ?? valueOf(props.fallback);\n  return jsx(Fragment, { children: markSignalGetter(getter) });\n}\n", "/**\n * View \u6A21\u677F\u5F15\u64CE \u2014 \u6307\u4EE4\u7CFB\u7EDF\n *\n * \u652F\u6301\u5185\u7F6E\u6307\u4EE4 v-if / v-else / v-else-if / v-for / v-show / v-text / v-html / v-model\uFF0C\u4EE5\u53CA\u7528\u6237\u6CE8\u518C\u7684\u81EA\u5B9A\u4E49\u6307\u4EE4\uFF08v-xxxx\uFF09\u3002\n * JSX \u4E2D\u4F7F\u7528 camelCase\uFF1AvIf\u3001vElse\u3001vElseIf\u3001vFor\u3001vShow\u3001vText\u3001vHtml\u3001vModel\uFF1B\u6A21\u677F\u4E2D\u53EF\u4F7F\u7528 v-if\u3001v-html\u3001v-model \u7B49\u3002\n * v-model \u7528\u6CD5\uFF1AvModel={[getter, setter]}\uFF0C\u5982 createSignal \u8FD4\u56DE\u7684\u5143\u7EC4\u3002\u539F\u751F input/textarea/select \u7531 applyProps \u53CC\u5411\u7ED1\u5B9A\uFF1B\n * \u81EA\u5B9A\u4E49\u8868\u5355\u7EC4\u4EF6\uFF1A\u7236\u7EC4\u4EF6\u76F4\u63A5\u4F20 model={[get, set]}\uFF0C\u7EC4\u4EF6\u5185\u89E3\u6784 props.model \u5373\u53EF\u3002\n */\n\nimport { isSignalGetter } from \"./signal.ts\";\nimport type { VNode } from \"./types.ts\";\n\n/** \u6307\u4EE4\u7ED1\u5B9A\uFF1A\u4F20\u7ED9\u6307\u4EE4\u94A9\u5B50\u7684\u53C2\u6570 */\nexport interface DirectiveBinding<T = unknown> {\n  value: T;\n  oldValue?: T;\n  /** \u53C2\u6570\uFF0C\u5982 v-foo:arg \u4E2D\u7684 arg */\n  arg?: string;\n  /** \u4FEE\u9970\u7B26\uFF0C\u5982 v-foo.mod1.mod2 \u4E2D\u7684 ['mod1','mod2'] */\n  modifiers?: string[];\n}\n\n/** \u6307\u4EE4\u94A9\u5B50\uFF1Amounted \u6302\u8F7D\u65F6\u3001updated \u7ED1\u5B9A\u503C\u53D8\u5316\u65F6\u3001unmounted \u5378\u8F7D\u65F6 */\nexport interface DirectiveHooks<T = unknown> {\n  mounted?(el: Element, binding: DirectiveBinding<T>): void;\n  updated?(el: Element, binding: DirectiveBinding<T>): void;\n  unmounted?(el: Element): void;\n}\n\nconst registry = new Map<string, DirectiveHooks>();\n\n/** \u5C06\u6A21\u677F\u98CE\u683C\u540D\u79F0\u8F6C\u4E3A camelCase\uFF0C\u5982 v-if -> vIf */\nexport function directiveNameToCamel(name: string): string {\n  if (name.startsWith(\"v-\")) {\n    const rest = name.slice(2).replace(/-([a-z])/g, (_, c) => c.toUpperCase());\n    return \"v\" + rest.charAt(0).toUpperCase() + rest.slice(1);\n  }\n  return name;\n}\n\n/** \u5C06 camelCase \u8F6C\u4E3A\u77ED\u6A2A\u7EBF\uFF0C\u5982 vIf -> v-if */\nexport function directiveNameToKebab(name: string): string {\n  if (name.startsWith(\"v\") && name.length > 1) {\n    const rest = name.slice(1).replace(\n      /([A-Z])/g,\n      (_, c) => `-${c.toLowerCase()}`,\n    );\n    return \"v\" + rest;\n  }\n  return name;\n}\n\n/**\n * \u6CE8\u518C\u81EA\u5B9A\u4E49\u6307\u4EE4\n *\n * @param name \u6307\u4EE4\u540D\uFF0C\u652F\u6301 v-xxx \u6216 vXxx\n * @param hooks mounted / updated / unmounted\n *\n * @example\n * registerDirective(\"v-focus\", {\n *   mounted(el) { (el as HTMLInputElement).focus(); },\n * });\n */\nexport function registerDirective(name: string, hooks: DirectiveHooks): void {\n  const camel = directiveNameToCamel(name);\n  registry.set(camel, hooks);\n  if (camel !== name) registry.set(name, hooks);\n}\n\n/**\n * \u6839\u636E prop \u540D\u83B7\u53D6\u6307\u4EE4\uFF08\u652F\u6301 vIf\u3001v-if \u7B49\uFF09\n */\nexport function getDirective(propKey: string): DirectiveHooks | undefined {\n  if (!propKey.startsWith(\"v\") && !propKey.startsWith(\"v-\")) return undefined;\n  return registry.get(propKey) ?? registry.get(directiveNameToCamel(propKey));\n}\n\n/** \u5224\u65AD\u662F\u5426\u4E3A\u6307\u4EE4\u7C7B prop \u540D\uFF08\u5185\u7F6E\u6216\u5DF2\u6CE8\u518C\uFF09 */\nconst BUILTIN_DIRECTIVE_PROPS = new Set([\n  \"vIf\",\n  \"v-if\",\n  \"vElse\",\n  \"v-else\",\n  \"vElseIf\",\n  \"v-else-if\",\n  \"vFor\",\n  \"v-for\",\n  \"vShow\",\n  \"v-show\",\n  \"vText\",\n  \"v-text\",\n  \"vHtml\",\n  \"v-html\",\n  \"vModel\",\n  \"v-model\",\n  \"vOnce\",\n  \"v-once\",\n  \"vCloak\",\n  \"v-cloak\",\n]);\n\nexport function isDirectiveProp(propKey: string): boolean {\n  if (BUILTIN_DIRECTIVE_PROPS.has(propKey)) return true;\n  if (\n    (propKey.startsWith(\"v\") && propKey.length > 1) || propKey.startsWith(\"v-\")\n  ) {\n    return true;\n  }\n  return false;\n}\n\n/**\n * \u5224\u65AD props \u662F\u5426\u5305\u542B\u6307\u5B9A\u6307\u4EE4\uFF08\u540C\u65F6\u652F\u6301 camelCase \u4E0E kebab-case\uFF0C\u51CF\u5C11\u9B54\u6CD5\u5B57\u7B26\u4E32\uFF09\n * @param props \u8282\u70B9 props\n * @param camelName \u6307\u4EE4\u9A7C\u5CF0\u540D\uFF0C\u5982 'vShow'\u3001'vIf'\u3001'vText'\n */\nexport function hasDirective(\n  props: Record<string, unknown>,\n  camelName: string,\n): boolean {\n  if (camelName in props) return true;\n  const kebab = directiveNameToKebab(camelName);\n  return kebab in props;\n}\n\n/** \u83B7\u53D6\u6307\u4EE4\u7ED1\u5B9A\u5F53\u524D\u503C\uFF08\u82E5\u4E3A getter \u5219\u6C42\u503C\uFF09\uFF1B\u4F9B dom \u5C42 v-once \u7B49\u51BB\u7ED3\u65F6\u4F7F\u7528 */\nexport function getDirectiveValue(value: unknown): unknown {\n  return isSignalGetter(value) ? (value as () => unknown)() : value;\n}\n\n/**\n * \u4ECE props \u4E2D\u63D0\u53D6\u6307\u4EE4\u7ED1\u5B9A\uFF08\u4F9B dom \u5C42\u5728 applyProps \u65F6\u8C03\u7528\u81EA\u5B9A\u4E49\u6307\u4EE4\uFF09\n */\nexport function createBinding(\n  value: unknown,\n  arg?: string,\n  modifiers?: string[],\n): DirectiveBinding {\n  return {\n    value: getDirectiveValue(value),\n    arg,\n    modifiers: modifiers ?? [],\n  };\n}\n\n/**\n * \u68C0\u67E5 vnode \u662F\u5426\u6709\u7ED3\u6784\u6027\u6307\u4EE4 vIf / vFor\uFF0C\u9700\u5728 createElement \u4E2D\u4F18\u5148\u5904\u7406\n */\nexport function hasStructuralDirective(\n  props: Record<string, unknown>,\n): \"vIf\" | \"vFor\" | null {\n  if (\"vIf\" in props || \"v-if\" in props) return \"vIf\";\n  if (\"vFor\" in props || \"v-for\" in props) return \"vFor\";\n  return null;\n}\n\n/**\n * \u53D6 vIf \u7684\u5F53\u524D\u503C\uFF08boolean \u6216 getter \u6C42\u503C\uFF09\n * \u652F\u6301\u6807\u8BB0\u8FC7\u7684 signal getter \u4E0E\u666E\u901A\u65E0\u53C2\u51FD\u6570\uFF08\u5982 () => tab() === \"a\"\uFF09\uFF0C\u4EE5\u4FBF\u5728 effect \u5185\u8BFB signal \u5E76\u8BA2\u9605\n */\nexport function getVIfValue(props: Record<string, unknown>): boolean {\n  const raw = props[\"vIf\"] ?? props[\"v-if\"];\n  if (raw == null) return true;\n  const v = typeof raw === \"function\"\n    ? (raw as () => unknown)()\n    : getDirectiveValue(raw);\n  return Boolean(v);\n}\n\n/**\n * \u53D6 vElse \u662F\u5426\u5E94\u663E\u793A\uFF1A\u4F9D\u8D56\u5916\u90E8\u4F20\u5165\u7684 lastVIf\uFF08\u4E0A\u4E00\u4E2A vIf \u4E3A false \u65F6 vElse \u624D\u663E\u793A\uFF09\n */\nexport function getVElseShow(lastVIf: boolean): boolean {\n  return !lastVIf;\n}\n\n/**\n * \u53D6 v-else-if \u7684\u5F53\u524D\u6761\u4EF6\u503C\uFF08\u4EC5\u5F53\u4E0A\u4E00\u4E2A v-if \u4E3A false \u65F6\u624D\u6709\u610F\u4E49\uFF09\n * \u652F\u6301\u6807\u8BB0\u8FC7\u7684 signal getter \u4E0E\u666E\u901A\u65E0\u53C2\u51FD\u6570\uFF0C\u4EE5\u4FBF\u5728 effect \u5185\u8BFB signal \u5E76\u8BA2\u9605\n */\nexport function getVElseIfValue(props: Record<string, unknown>): boolean {\n  const raw = props[\"vElseIf\"] ?? props[\"v-else-if\"];\n  if (raw == null) return false;\n  const v = typeof raw === \"function\"\n    ? (raw as () => unknown)()\n    : getDirectiveValue(raw);\n  return Boolean(v);\n}\n\n/**\n * \u4ECE v-for \u7684 children \u89E3\u6790\u51FA\u5DE5\u5382\u51FD\u6570\u3002\n * \u652F\u6301\uFF1A(item, index) => VNode \u7684\u5355\u4E2A\u51FD\u6570\uFF0C\u6216 expand \u540E\u5F97\u5230\u7684\u5355\u5143\u7D20\u6570\u7EC4 [factory]\u3002\n */\nexport function resolveVForFactory(\n  children: unknown,\n): (item: unknown, index: number) => VNode | VNode[] {\n  if (typeof children === \"function\") {\n    return children as (item: unknown, index: number) => VNode | VNode[];\n  }\n  if (\n    Array.isArray(children) && children.length === 1 &&\n    typeof children[0] === \"function\"\n  ) {\n    return children[0] as (item: unknown, index: number) => VNode | VNode[];\n  }\n  return () => (children as VNode);\n}\n\n/**\n * \u53D6 vFor \u7684 list \u4E0E\u5B50\u8282\u70B9\u5DE5\u5382\uFF08children \u4E3A (item, index) => VNode | VNode[]\uFF09\n */\nexport function getVForListAndFactory(\n  props: Record<string, unknown>,\n  children: unknown,\n): {\n  list: unknown[];\n  factory: (item: unknown, index: number) => VNode | VNode[];\n} | null {\n  const rawList = props[\"vFor\"] ?? props[\"v-for\"];\n  if (rawList == null) return null;\n  const resolved = getDirectiveValue(rawList);\n  const list = Array.isArray(resolved) ? resolved : [];\n  // \u652F\u6301 children \u4E3A\u5DE5\u5382\u51FD\u6570\uFF0C\u6216 expand \u540E\u7684\u5355\u5143\u7D20\u6570\u7EC4 [factory]\n  const factory = resolveVForFactory(children);\n  return { list, factory };\n}\n\n/** \u53D6 v-show \u7684\u5F53\u524D\u503C\uFF08boolean \u6216 getter \u6C42\u503C\uFF09\uFF0C\u4F9B dom \u5C42\u5E94\u7528 display */\nexport function getVShowValue(props: Record<string, unknown>): boolean {\n  const raw = props[\"vShow\"] ?? props[\"v-show\"];\n  if (raw == null) return true;\n  return Boolean(getDirectiveValue(raw));\n}\n\n/** \u53D6 v-text \u7684\u5F53\u524D\u503C\uFF08string \u6216 getter/\u51FD\u6570\u6C42\u503C\uFF09\uFF0C\u4F9B dom \u5C42\u5E94\u7528 textContent */\nexport function getVTextValue(props: Record<string, unknown>): string {\n  const raw = props[\"vText\"] ?? props[\"v-text\"];\n  if (raw == null) return \"\";\n  const v = typeof raw === \"function\"\n    ? (raw as () => unknown)()\n    : getDirectiveValue(raw);\n  return v == null ? \"\" : String(v);\n}\n\n/**\n * \u53D6 v-html \u7684\u5F53\u524D\u503C\uFF08string \u6216 getter/\u51FD\u6570\u6C42\u503C\uFF09\uFF0C\u4F9B dom \u5C42\u5E94\u7528 innerHTML\n *\n * \u5B89\u5168\uFF1A\u672A\u8F6C\u4E49 HTML\uFF0C\u5B58\u5728 XSS \u98CE\u9669\u3002\u7981\u6B62\u5C06\u672A sanitize \u7684\u7528\u6237\u8F93\u5165\u4F20\u5165\u3002\n * \u4EC5\u9650\u4FE1\u4EFB\u5185\u5BB9\uFF1B\u5BF9\u7528\u6237\u8F93\u5165\u8BF7\u5148\u7528 DOMPurify\u3001sanitize-html \u7B49\u5E93\u505A sanitize \u540E\u518D\u4F20\u5165\u3002\n */\nexport function getVHtmlValue(props: Record<string, unknown>): string {\n  const raw = props[\"vHtml\"] ?? props[\"v-html\"];\n  if (raw == null) return \"\";\n  const v = typeof raw === \"function\"\n    ? (raw as () => unknown)()\n    : getDirectiveValue(raw);\n  return v == null ? \"\" : String(v);\n}\n\n/**\n * \u4ECE props \u4E2D\u53D6\u51FA v-model/model \u7ED1\u5B9A\uFF0C\u4F9B\u9700\u8981\u540C\u65F6\u517C\u5BB9 vModel \u4E0E model \u7684\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u4F7F\u7528\n *\n * \u63A8\u8350\u505A\u6CD5\uFF1A\u81EA\u5B9A\u4E49\u7EC4\u4EF6\u76F4\u63A5\u63A5\u6536 model={[get, set]}\uFF0C\u7EC4\u4EF6\u5185 const [get, set] = props.model \u5373\u53EF\u3002\n * \u82E5\u7EC4\u4EF6\u9700\u540C\u65F6\u63A5\u53D7 vModel \u6216 model\uFF08\u5982\u6A21\u677F\u7F16\u8BD1\u4EA7\u7269\uFF09\uFF0C\u53EF\u8C03\u7528\u672C\u51FD\u6570\u7EDF\u4E00\u53D6\u51FA [getter, setter]\u3002\n *\n * @param props \u7EC4\u4EF6 props\uFF08\u53EF\u542B vModel\u3001v-model \u6216 model\uFF09\n * @returns [getter, setter] \u6216 null\uFF08\u672A\u4F20\u65F6\uFF09\n */\nexport function getModelFromProps(\n  props: Record<string, unknown>,\n): [() => unknown, (v: unknown) => void] | null {\n  const raw = props[\"vModel\"] ?? props[\"v-model\"] ?? props[\"model\"];\n  if (\n    !Array.isArray(raw) ||\n    raw.length < 2 ||\n    typeof raw[0] !== \"function\" ||\n    typeof raw[1] !== \"function\"\n  ) {\n    return null;\n  }\n  return [raw[0] as () => unknown, raw[1] as (v: unknown) => void];\n}\n\n/**\n * \u5E94\u7528\u81EA\u5B9A\u4E49\u6307\u4EE4\u5230\u5143\u7D20\uFF1A\u5728 applyProps \u4E2D\u5BF9\u6BCF\u4E2A\u6307\u4EE4 prop \u8C03\u7528 mounted\uFF0C\u82E5\u503C\u4E3A getter \u5219\u7528 effect \u8C03\u7528 updated\uFF1B\n * \u82E5\u6307\u4EE4\u63D0\u4F9B unmounted\uFF0C\u901A\u8FC7 registerUnmount \u767B\u8BB0\uFF0C\u8282\u70B9\u4ECE DOM \u79FB\u9664\u524D\u4F1A\u8C03\u7528\n */\nexport function applyDirectives(\n  el: Element,\n  props: Record<string, unknown>,\n  effectFn: (fn: () => void) => () => void,\n  registerUnmount?: (el: Element, cb: () => void) => void,\n): void {\n  for (const [key, value] of Object.entries(props)) {\n    if (key === \"children\" || key === \"key\") continue;\n    if (BUILTIN_DIRECTIVE_PROPS.has(key)) continue; // \u5185\u7F6E\u6307\u4EE4\u5DF2\u5728 createElement / applyProps \u4E2D\u5904\u7406\n    const directive = getDirective(key);\n    if (!directive) continue;\n    const binding = createBinding(value);\n    if (directive.mounted) {\n      directive.mounted(el, binding);\n    }\n    if (directive.updated && isSignalGetter(value)) {\n      effectFn(() => {\n        const current = createBinding(value);\n        directive.updated!(el, current);\n      });\n    }\n    if (directive.unmounted && registerUnmount) {\n      registerUnmount(el, () => directive.unmounted!(el));\n    }\n  }\n}\n", "/**\n * View \u6A21\u677F\u5F15\u64CE \u2014 Context\uFF08\u8DE8\u5C42\u6570\u636E\u6CE8\u5165\uFF09\n *\n * createContext \u521B\u5EFA\u4E0A\u4E0B\u6587\uFF0CProvider \u5728\u6811\u4E2D\u6CE8\u5165\u503C\uFF0CuseContext \u5728\u4EFB\u610F\u5B50\u7EC4\u4EF6\u4E2D\u8BFB\u53D6\u3002\n * \u6E32\u67D3\u65F6\u5728 dom \u4E2D\u8FDB\u5165 Provider \u5373 push\u3001\u9000\u51FA\u5373 pop\uFF0C\u4FDD\u8BC1\u540C\u4E00\u6B21\u6E32\u67D3\u4E2D\u5B50\u6811\u8BFB\u5230\u6B63\u786E\u503C\u3002\n */\n\nimport type { VNode } from \"./types.ts\";\n\n/** \u6BCF\u4E2A context \u7684\u6808\uFF0C\u7528\u4E8E\u5D4C\u5957 Provider */\nconst contextStacks = new Map<symbol, unknown[]>();\n\n/** context id -> \u9ED8\u8BA4\u503C\uFF08\u65E0 Provider \u65F6 useContext \u8FD4\u56DE\uFF09 */\nconst defaultValues = new Map<symbol, unknown>();\n\n/** \u53EF\u6CE8\u5165 context \u7684\u7EC4\u4EF6 -> { id, getValue }\uFF0C\u652F\u6301\u9ED8\u8BA4 Provider(value) \u4E0E\u522B\u540D\u7EC4\u4EF6\uFF08\u5982 RouterProvider(router)\uFF09 */\nconst providerBindings = new Map<\n  (props: Record<string, unknown>) => VNode | VNode[] | null,\n  { id: symbol; getValue: (props: Record<string, unknown>) => unknown }\n>();\n\n/**\n * \u8FDB\u5165 Provider \u65F6\u538B\u6808\uFF08\u7531 dom \u5728\u6E32\u67D3\u65F6\u8C03\u7528\uFF09\n * @internal\n */\nexport function pushContext(id: symbol, value: unknown): void {\n  let stack = contextStacks.get(id);\n  if (!stack) {\n    stack = [];\n    contextStacks.set(id, stack);\n  }\n  stack.push(value);\n}\n\n/**\n * \u79BB\u5F00 Provider \u65F6\u51FA\u6808\uFF08\u7531 dom \u5728\u6E32\u67D3\u65F6\u8C03\u7528\uFF09\n * @internal\n */\nexport function popContext(id: symbol): void {\n  const stack = contextStacks.get(id);\n  if (stack && stack.length > 0) stack.pop();\n}\n\n/**\n * \u83B7\u53D6\u5F53\u524D context \u503C\uFF08\u6808\u9876\uFF09\uFF0C\u65E0\u5219\u8FD4\u56DE\u521B\u5EFA\u65F6\u7684\u9ED8\u8BA4\u503C\n * @internal\n */\nexport function getContext(id: symbol): unknown {\n  const stack = contextStacks.get(id);\n  const value = stack && stack.length > 0 ? stack[stack.length - 1] : undefined;\n  return value !== undefined ? value : defaultValues.get(id);\n}\n\n/**\n * \u5224\u65AD\u7EC4\u4EF6\u662F\u5426\u4E3A\u67D0 context \u7684 Provider\uFF0C\u82E5\u662F\u5219\u8FD4\u56DE\u5176 context id\n * @internal\n */\nexport function getProviderContextId(\n  component: (props: Record<string, unknown>) => VNode | VNode[] | null,\n): symbol | undefined {\n  return providerBindings.get(component)?.id;\n}\n\n/**\n * \u82E5\u7EC4\u4EF6\u5DF2\u6CE8\u518C\u4E3A context \u63D0\u4F9B\u8005\uFF08\u542B createContext \u7684 Provider \u6216 registerProviderAlias \u7684\u522B\u540D\uFF09\uFF0C\n * \u8FD4\u56DE { id, value } \u4F9B dom \u5C42 push\uFF1B\u5426\u5219\u8FD4\u56DE undefined\u3002\n * @internal\n */\nexport function getContextBinding(\n  component: (props: Record<string, unknown>) => VNode | VNode[] | null,\n  props: Record<string, unknown>,\n): { id: symbol; value: unknown } | undefined {\n  const binding = providerBindings.get(component);\n  if (!binding) return undefined;\n  return { id: binding.id, value: binding.getValue(props) };\n}\n\nexport type ContextValue<T> = T;\n\n/**\n * \u521B\u5EFA\u4E0A\u4E0B\u6587\n *\n * @param defaultValue \u65E0 Provider \u5305\u88F9\u65F6 useContext \u8FD4\u56DE\u7684\u9ED8\u8BA4\u503C\n * @returns { Provider, useContext }\uFF0CProvider \u4E3A\u7EC4\u4EF6\u7528\u4E8E\u5305\u88F9\u5B50\u6811\uFF0CuseContext \u5728\u5B50\u7EC4\u4EF6\u4E2D\u8C03\u7528\u53D6\u5F53\u524D\u503C\n *\n * @example\n * const ThemeContext = createContext<'light'|'dark'>('light');\n * // \u6839\u6216\u7236\u7EA7\uFF1A<ThemeContext.Provider value={theme()}><App /></ThemeContext.Provider>\n * // \u5B50\u7EC4\u4EF6\uFF1Aconst theme = ThemeContext.useContext();\n */\nexport function createContext<T>(defaultValue: T): {\n  Provider: (\n    props: { value: T; children?: VNode | VNode[] | null },\n  ) => VNode | VNode[] | null;\n  useContext: () => T;\n  /** \u6CE8\u518C\u201C\u522B\u540D\u201D\u63D0\u4F9B\u8005\uFF1A\u7528 getValue(props) \u6CE8\u5165\u540C\u4E00 context\uFF0C\u4FBF\u4E8E\u5305\u88C5\u7EC4\u4EF6\uFF08\u5982 RouterProvider(router)\uFF09\u76F4\u63A5\u6CE8\u5165\uFF0C\u65E0\u9700\u5185\u5C42 Provider */\n  registerProviderAlias: (\n    component: (props: Record<string, unknown>) => VNode | VNode[] | null,\n    getValue: (props: Record<string, unknown>) => T,\n  ) => void;\n} {\n  const id = Symbol(\"view.context\");\n  defaultValues.set(id, defaultValue);\n\n  const Provider = (\n    props: { value: T; children?: VNode | VNode[] | null },\n  ): VNode | VNode[] | null => {\n    return (props.children ?? null) as VNode | VNode[] | null;\n  };\n  providerBindings.set(\n    Provider as (props: Record<string, unknown>) => VNode | VNode[] | null,\n    { id, getValue: (p) => (p as { value: T }).value },\n  );\n\n  const useContext = (): T => {\n    return getContext(id) as T;\n  };\n\n  const registerProviderAlias = (\n    component: (props: Record<string, unknown>) => VNode | VNode[] | null,\n    getValue: (props: Record<string, unknown>) => T,\n  ): void => {\n    providerBindings.set(component, {\n      id,\n      getValue: getValue as (p: Record<string, unknown>) => unknown,\n    });\n  };\n\n  return { Provider, useContext, registerProviderAlias };\n}\n", "/**\n * View \u6A21\u677F\u5F15\u64CE \u2014 SSR\uFF1A\u5C06 VNode \u8F6C\u4E3A HTML \u5B57\u7B26\u4E32\u6216\u6D41\n *\n * createElementToString\u3001createElementToStream\u3001stringifyAttributes\u3001escapeText/escapeAttr\u3001normalizeChildrenForSSR\n */\n\nimport { isSignalGetter } from \"../signal.ts\";\nimport type { VNode } from \"../types.ts\";\nimport { getErrorBoundaryFallback, isErrorBoundary } from \"../boundary.ts\";\nimport {\n  getVElseIfValue,\n  getVElseShow,\n  getVForListAndFactory,\n  getVHtmlValue,\n  getVIfValue,\n  getVShowValue,\n  getVTextValue,\n  hasDirective,\n  hasStructuralDirective,\n  isDirectiveProp,\n} from \"../directive.ts\";\nimport { getContextBinding, popContext, pushContext } from \"../context.ts\";\nimport type { IfContext, SSROptions } from \"./shared.ts\";\nimport { isFragment, isVNodeLike } from \"./shared.ts\";\n\n/** \u81EA\u95ED\u5408\u6807\u7B7E\uFF0C\u4E0D\u751F\u6210\u95ED\u5408\u6807\u7B7E */\nconst voidElements = new Set([\n  \"area\",\n  \"base\",\n  \"br\",\n  \"col\",\n  \"embed\",\n  \"hr\",\n  \"img\",\n  \"input\",\n  \"link\",\n  \"meta\",\n  \"param\",\n  \"source\",\n  \"track\",\n  \"wbr\",\n]);\n\nfunction escapeText(s: string): string {\n  return s\n    .replace(/&/g, \"&amp;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\");\n}\n\nfunction escapeAttr(s: string): string {\n  return s\n    .replace(/&/g, \"&amp;\")\n    .replace(/\"/g, \"&quot;\")\n    .replace(/</g, \"&lt;\")\n    .replace(/>/g, \"&gt;\");\n}\n\n/** SSR \u4E13\u7528\uFF1A\u5C06 children \u89C4\u8303\u5316\u4E3A VNode \u6570\u7EC4\uFF0Cgetter \u4F1A\u8C03\u7528\u4E00\u6B21\u53D6\u5F53\u524D\u503C\uFF1B\u5355\u6B21\u904D\u5386\u6536\u96C6\u51CF\u5C11 flatMap \u4E2D\u95F4\u6570\u7EC4 */\nfunction normalizeChildrenForSSR(children: unknown): VNode[] {\n  if (children == null) return [];\n  if (isSignalGetter(children)) {\n    return normalizeChildrenForSSR((children as () => unknown)());\n  }\n  if (Array.isArray(children)) {\n    const out: VNode[] = [];\n    for (const c of children) {\n      const items = normalizeChildrenForSSR(c);\n      for (const v of items) out.push(v);\n    }\n    return out;\n  }\n  if (isVNodeLike(children)) {\n    return [children as VNode];\n  }\n  return [{\n    type: \"#text\",\n    props: { nodeValue: String(children) },\n    children: [],\n  }];\n}\n\n/**\n * SSR\uFF1A\u5C06 props \u4E2D\u9700\u8981\u8F93\u51FA\u7684\u5C5E\u6027\u8F6C\u4E3A HTML \u5C5E\u6027\u5B57\u7B26\u4E32\uFF08\u4E0D\u542B children/key\uFF09\n * \u82E5\u540E\u7EED\u9700\u4F18\u5316\uFF0C\u53EF\u5BF9\u9759\u6001 props \u505A\u7F13\u5B58\u62FC\u63A5\u7ED3\u679C\uFF08\u9700\u8BC6\u522B\u201C\u9759\u6001\u201D\uFF09\uFF0C\u6216\u4EC5\u5728\u786E\u6709\u52A8\u6001 props \u65F6\u518D\u4F18\u5316\n */\nfunction stringifyAttributes(props: Record<string, unknown>): string {\n  const parts: string[] = [];\n  for (const [key, value] of Object.entries(props)) {\n    if (\n      key === \"children\" || key === \"key\" || key === \"ref\" ||\n      key === \"dangerouslySetInnerHTML\"\n    ) continue;\n    // v-cloak\uFF1A\u8F93\u51FA\u4E3A data-view-cloak \u4F9B CSS \u9690\u85CF\uFF0Chydrate \u540E\u7531 runtime \u79FB\u9664\n    if (key === \"vCloak\" || key === \"v-cloak\") {\n      parts.push('data-view-cloak=\"\"');\n      continue;\n    }\n    if (isDirectiveProp(key)) continue;\n    const v = isSignalGetter(value) ? (value as () => unknown)() : value;\n    if (typeof v === \"function\") continue;\n    if (v == null || v === false) continue;\n    if (v === true) {\n      parts.push(escapeAttr(key));\n      continue;\n    }\n    let str: string;\n    if (key === \"style\" && typeof v === \"object\" && v !== null) {\n      str = Object.entries(v as Record<string, unknown>)\n        .map(([k, val]) =>\n          `${k.replace(/([A-Z])/g, \"-$1\").toLowerCase().replace(/^-/, \"\")}: ${\n            val == null ? \"\" : String(val)\n          }`\n        )\n        .join(\"; \");\n    } else {\n      str = String(v);\n    }\n    if (key === \"className\") {\n      parts.push(`class=\"${escapeAttr(str)}\"`);\n    } else if (key === \"htmlFor\") {\n      parts.push(`for=\"${escapeAttr(str)}\"`);\n    } else {\n      parts.push(`${escapeAttr(key)}=\"${escapeAttr(str)}\"`);\n    }\n  }\n  return parts.length ? \" \" + parts.join(\" \") : \"\";\n}\n\n/**\n * \u5C06 VNode \u8F6C\u4E3A HTML \u5B57\u7B26\u4E32\uFF08SSR\uFF0C\u65E0\u6D4F\u89C8\u5668 API\uFF09\n * SSR \u65F6 getter \u53EA\u6C42\u503C\u4E00\u6B21\uFF1BvIf/vElse/vFor \u4E0E createElement \u903B\u8F91\u4E00\u81F4\n * options.allowRawHtml \u4E3A false \u65F6 v-html \u8F93\u51FA\u8F6C\u4E49\u6587\u672C\uFF08\u5B89\u5168\u573A\u666F\uFF09\u3002\n * \u9ED8\u8BA4 v-html \u5728\u670D\u52A1\u7AEF\u540C\u6837\u4E0D\u8F6C\u4E49\uFF0C\u4E0E\u5BA2\u6237\u7AEF\u4E00\u81F4\u3002\n */\nexport function createElementToString(\n  vnode: VNode,\n  ifContext?: IfContext,\n  options?: SSROptions,\n): string {\n  if (isFragment(vnode)) {\n    const ctx = ifContext ?? { lastVIf: true };\n    const children = normalizeChildrenForSSR(\n      vnode.props.children ?? vnode.children,\n    );\n    return children.map((c) => createElementToString(c, ctx, options)).join(\"\");\n  }\n\n  if (typeof vnode.type === \"function\") {\n    const type = vnode.type;\n    const props = vnode.props;\n    const binding = getContextBinding(type, props);\n    if (binding) pushContext(binding.id, binding.value);\n    try {\n      const result: VNode | VNode[] | null = type(props);\n      if (result == null) return \"\";\n      const nodes = Array.isArray(result) ? result : [result];\n      if (isErrorBoundary(type)) {\n        try {\n          return nodes.map((n) => createElementToString(n, ifContext, options))\n            .join(\"\");\n        } catch (e) {\n          return createElementToString(\n            getErrorBoundaryFallback(props)(e),\n            ifContext,\n            options,\n          );\n        }\n      }\n      return nodes.map((n) => createElementToString(n, ifContext, options))\n        .join(\"\");\n    } finally {\n      if (binding) popContext(binding.id);\n    }\n  }\n\n  const tag = vnode.type as string;\n  if (tag === \"#text\") {\n    return escapeText(\n      String((vnode.props as { nodeValue?: unknown }).nodeValue ?? \"\"),\n    );\n  }\n\n  const props = vnode.props;\n  const structural = hasStructuralDirective(props);\n\n  if (hasDirective(props, \"vElse\")) {\n    if (ifContext && !getVElseShow(ifContext.lastVIf)) return \"\";\n    if (ifContext) ifContext.lastVIf = true;\n  }\n  if (hasDirective(props, \"vElseIf\")) {\n    if (ifContext && ifContext.lastVIf) return \"\";\n    if (!getVElseIfValue(props)) {\n      if (ifContext) ifContext.lastVIf = false;\n      return \"\";\n    }\n    if (ifContext) ifContext.lastVIf = true;\n  }\n\n  if (structural === \"vIf\") {\n    if (!getVIfValue(props)) {\n      if (ifContext) ifContext.lastVIf = false;\n      return \"\";\n    }\n    if (ifContext) ifContext.lastVIf = true;\n  }\n\n  if (structural === \"vFor\") {\n    const rawChildren = props.children ?? vnode.children;\n    const parsed = getVForListAndFactory(props, rawChildren);\n    if (parsed) {\n      const { list, factory } = parsed;\n      const templateProps = { ...props, vFor: undefined, \"v-for\": undefined };\n      return list\n        .map((item, i) => {\n          const childResult = factory(item, i);\n          const childNodes = Array.isArray(childResult)\n            ? childResult\n            : [childResult];\n          const first = childNodes[0] as VNode | undefined;\n          const itemVnode: VNode = {\n            type: tag,\n            props: {\n              ...templateProps,\n              children: childNodes.length === 1 ? childNodes[0] : childNodes,\n            },\n            key: first?.key != null ? first.key : i,\n          };\n          return createElementToString(itemVnode, ifContext, options);\n        })\n        .join(\"\");\n    }\n  }\n\n  let attrs = stringifyAttributes(props);\n  if (hasDirective(props, \"vShow\")) {\n    if (!getVShowValue(props)) {\n      attrs += ' style=\"display:none\"';\n    }\n  }\n  if (vnode.key != null && vnode.key !== undefined) {\n    attrs += ` data-key=\"${escapeAttr(String(vnode.key))}\"`;\n  }\n  const ctx = ifContext ?? { lastVIf: true };\n  let inner: string;\n  if (hasDirective(props, \"vText\")) {\n    inner = escapeText(getVTextValue(props));\n  } else if (hasDirective(props, \"vHtml\")) {\n    const html = getVHtmlValue(props);\n    inner = options?.allowRawHtml === false ? escapeText(html) : html;\n  } else {\n    const children = normalizeChildrenForSSR(props.children ?? vnode.children);\n    const hasKeyedChildren = children.some(\n      (c) => (c as VNode).key != null && (c as VNode).key !== undefined,\n    );\n    inner = hasKeyedChildren\n      ? children\n        .map((c, i) => {\n          const v = c as VNode;\n          const key = v.key != null && v.key !== undefined\n            ? String(v.key)\n            : `@${i}`;\n          return `<span data-view-keyed data-key=\"${escapeAttr(key)}\">${\n            createElementToString(c, ctx, options)\n          }</span>`;\n        })\n        .join(\"\")\n      : children.map((c) => createElementToString(c, ctx, options)).join(\"\");\n  }\n  if (voidElements.has(tag.toLowerCase())) {\n    return `<${tag}${attrs}>`;\n  }\n  return `<${tag}${attrs}>${inner}</${tag}>`;\n}\n\n/**\n * \u6D41\u5F0F SSR\uFF1A\u5C06 VNode \u8F6C\u4E3A\u9010\u5757\u8F93\u51FA\u7684\u5B57\u7B26\u4E32\u751F\u6210\u5668\uFF0C\u4E0E createElementToString \u7ED3\u6784\u4E00\u81F4\n * options.allowRawHtml \u4E3A false \u65F6 v-html \u8F93\u51FA\u8F6C\u4E49\u6587\u672C\uFF1B\u9ED8\u8BA4 v-html \u5728\u670D\u52A1\u7AEF\u540C\u6837\u4E0D\u8F6C\u4E49\n */\nexport function* createElementToStream(\n  vnode: VNode,\n  ifContext?: IfContext,\n  options?: SSROptions,\n): Generator<string> {\n  if (isFragment(vnode)) {\n    const ctx = ifContext ?? { lastVIf: true };\n    const children = normalizeChildrenForSSR(\n      vnode.props.children ?? vnode.children,\n    );\n    for (const c of children) {\n      yield* createElementToStream(c, ctx, options);\n    }\n    return;\n  }\n\n  if (typeof vnode.type === \"function\") {\n    const type = vnode.type;\n    const props = vnode.props;\n    const binding = getContextBinding(type, props);\n    if (binding) pushContext(binding.id, binding.value);\n    try {\n      const result: VNode | VNode[] | null = type(props);\n      if (result == null) return;\n      const nodes = Array.isArray(result) ? result : [result];\n      if (isErrorBoundary(type)) {\n        try {\n          for (const n of nodes) {\n            yield* createElementToStream(n, ifContext, options);\n          }\n        } catch (e) {\n          yield* createElementToStream(\n            getErrorBoundaryFallback(props)(e),\n            ifContext,\n            options,\n          );\n        }\n      } else {\n        for (const n of nodes) {\n          yield* createElementToStream(n, ifContext, options);\n        }\n      }\n    } finally {\n      if (binding) popContext(binding.id);\n    }\n    return;\n  }\n\n  const tag = vnode.type as string;\n  if (tag === \"#text\") {\n    yield escapeText(\n      String((vnode.props as { nodeValue?: unknown }).nodeValue ?? \"\"),\n    );\n    return;\n  }\n\n  const props = vnode.props;\n  const structural = hasStructuralDirective(props);\n\n  if (hasDirective(props, \"vElse\")) {\n    if (ifContext && !getVElseShow(ifContext.lastVIf)) return;\n    if (ifContext) ifContext.lastVIf = true;\n  }\n  if (hasDirective(props, \"vElseIf\")) {\n    if (ifContext && ifContext.lastVIf) return;\n    if (!getVElseIfValue(props)) {\n      if (ifContext) ifContext.lastVIf = false;\n      return;\n    }\n    if (ifContext) ifContext.lastVIf = true;\n  }\n  if (structural === \"vIf\") {\n    if (!getVIfValue(props)) {\n      if (ifContext) ifContext.lastVIf = false;\n      return;\n    }\n    if (ifContext) ifContext.lastVIf = true;\n  }\n  if (structural === \"vFor\") {\n    const rawChildren = props.children ?? vnode.children;\n    const parsed = getVForListAndFactory(props, rawChildren);\n    if (parsed) {\n      const { list, factory } = parsed;\n      const templateProps = { ...props, vFor: undefined, \"v-for\": undefined };\n      for (let i = 0; i < list.length; i++) {\n        const childResult = factory(list[i], i);\n        const childNodes = Array.isArray(childResult)\n          ? childResult\n          : [childResult];\n        const first = childNodes[0] as VNode | undefined;\n        const itemVnode: VNode = {\n          type: tag,\n          props: {\n            ...templateProps,\n            children: childNodes.length === 1 ? childNodes[0] : childNodes,\n          },\n          key: first?.key != null ? first.key : i,\n        };\n        yield* createElementToStream(itemVnode, ifContext, options);\n      }\n    }\n    return;\n  }\n\n  let attrs = stringifyAttributes(props);\n  if (hasDirective(props, \"vShow\")) {\n    if (!getVShowValue(props)) attrs += ' style=\"display:none\"';\n  }\n  if (vnode.key != null && vnode.key !== undefined) {\n    attrs += ` data-key=\"${escapeAttr(String(vnode.key))}\"`;\n  }\n  const ctx = ifContext ?? { lastVIf: true };\n  yield `<${tag}${attrs}>`;\n  if (!voidElements.has(tag.toLowerCase())) {\n    if (hasDirective(props, \"vText\")) {\n      yield escapeText(getVTextValue(props));\n    } else if (hasDirective(props, \"vHtml\")) {\n      const html = getVHtmlValue(props);\n      yield options?.allowRawHtml === false ? escapeText(html) : html;\n    } else {\n      const children = normalizeChildrenForSSR(\n        props.children ?? vnode.children,\n      );\n      const hasKeyedChildren = children.some(\n        (c) => (c as VNode).key != null && (c as VNode).key !== undefined,\n      );\n      if (hasKeyedChildren) {\n        for (let i = 0; i < children.length; i++) {\n          const v = children[i] as VNode;\n          const key = v.key != null && v.key !== undefined\n            ? String(v.key)\n            : `@${i}`;\n          yield `<span data-view-keyed data-key=\"${escapeAttr(key)}\">`;\n          yield* createElementToStream(children[i], ctx, options);\n          yield `</span>`;\n        }\n      } else {\n        for (const c of children) yield* createElementToStream(c, ctx, options);\n      }\n    }\n    yield `</${tag}>`;\n  }\n}\n", "/**\n * View \u6A21\u677F\u5F15\u64CE \u2014 \u6D41\u5F0F SSR\uFF08\u6309\u9700\u5BFC\u5165\uFF09\n *\n * \u4EC5\u5BFC\u51FA renderToStream\uFF0C\u4F7F\u7528\u65B9\u4ECE view/stream \u5BFC\u5165\u53EF\u907F\u514D\u5C06\u6D41\u5F0F\u903B\u8F91\u6253\u8FDB\u4E3B\u5305\u3002\n */\n\nimport { createElementToStream } from \"./dom.ts\";\nimport type { SSROptions } from \"./dom.ts\";\nimport type { VNode } from \"./types.ts\";\n\n/**\n * \u6D41\u5F0F SSR\uFF1A\u5C06\u6839\u7EC4\u4EF6\u6E32\u67D3\u4E3A\u9010\u5757\u8F93\u51FA\u7684\u5B57\u7B26\u4E32\u751F\u6210\u5668\uFF0C\u4FBF\u4E8E\u8FB9\u6E32\u67D3\u8FB9\u5199\u5165\u54CD\u5E94\n *\n * @param fn \u6839\u7EC4\u4EF6\u51FD\u6570\n * @param options allowRawHtml \u4E3A false \u65F6 v-html \u8F93\u51FA\u8F6C\u4E49\u6587\u672C\uFF08\u5B89\u5168\u573A\u666F\uFF09\uFF1B\u9ED8\u8BA4 v-html \u5728\u670D\u52A1\u7AEF\u4E0D\u8F6C\u4E49\n * @returns \u5B57\u7B26\u4E32\u751F\u6210\u5668\uFF0C\u53EF for (const chunk of renderToStream(fn)) \u6216 ReadableStream.from(renderToStream(fn))\n */\nexport function renderToStream(\n  fn: () => VNode,\n  options?: SSROptions,\n): Generator<string> {\n  const vnode = fn();\n  return createElementToStream(vnode, undefined, options);\n}\n"],
  "mappings": "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",
  "names": ["FragmentType", "isFragment", "vnode", "isVNodeLike", "x", "SIGNAL_GETTER_MARKER", "isSignalGetter", "fn", "SIGNAL_GETTER_MARKER", "isErrorBoundary", "component", "ErrorBoundary", "getErrorBoundaryFallback", "props", "fb", "vnode", "directiveNameToKebab", "name", "_", "c", "BUILTIN_DIRECTIVE_PROPS", "isDirectiveProp", "propKey", "hasDirective", "props", "camelName", "directiveNameToKebab", "getDirectiveValue", "value", "isSignalGetter", "hasStructuralDirective", "props", "getVIfValue", "raw", "getDirectiveValue", "getVElseShow", "lastVIf", "getVElseIfValue", "resolveVForFactory", "children", "getVForListAndFactory", "rawList", "resolved", "list", "factory", "getVShowValue", "getVTextValue", "v", "getVHtmlValue", "contextStacks", "providerBindings", "pushContext", "id", "value", "stack", "contextStacks", "popContext", "getContextBinding", "component", "props", "binding", "providerBindings", "voidElements", "escapeText", "s", "escapeAttr", "normalizeChildrenForSSR", "children", "isSignalGetter", "out", "c", "items", "v", "isVNodeLike", "stringifyAttributes", "props", "parts", "key", "value", "isDirectiveProp", "str", "k", "val", "createElementToStream", "vnode", "ifContext", "options", "isFragment", "ctx", "children", "normalizeChildrenForSSR", "c", "type", "props", "binding", "getContextBinding", "pushContext", "result", "nodes", "isErrorBoundary", "n", "e", "getErrorBoundaryFallback", "popContext", "tag", "escapeText", "structural", "hasStructuralDirective", "hasDirective", "getVElseShow", "getVElseIfValue", "getVIfValue", "rawChildren", "parsed", "getVForListAndFactory", "list", "factory", "templateProps", "i", "childResult", "childNodes", "first", "itemVnode", "attrs", "stringifyAttributes", "getVShowValue", "escapeAttr", "voidElements", "getVTextValue", "html", "getVHtmlValue", "v", "key", "renderToStream", "fn", "options", "vnode", "createElementToStream"]
}
