var a=new Set,T=[],v=!1;function R(){v=!1,T.length=0;for(let e of a)T.push(e);a.clear();for(let e of T)e()}function d(e){a.add(e),v||(v=!0,typeof globalThis.queueMicrotask<"u"?globalThis.queueMicrotask(R):typeof Promise<"u"?Promise.resolve().then(R):setTimeout(R,0))}function g(e){a.delete(e)}var i=null;function h(e){i=e}function m(){return i}function E(e){let n=e,t=new Set,c=()=>(i&&(t.add(i),i._subscriptionSets&&i._subscriptionSets.push(t)),n),u=o=>{let r=typeof o=="function"?o(n):o;Object.is(n,r)||(n=r,t.forEach(s=>d(s)))};return[p(c),u]}var k=Symbol.for("view.signalGetter");function p(e){return e[k]=!0,e}var _=null;function G(e){d(e)}function b(e){let n=e._cleanups;if(n){for(let t of n)t();n.length=0}}function x(e){let n=!1,t=()=>{if(n)return;b(t);let o=t._subscriptionSets;if(o){for(let s of o)s.delete(t);o.length=0}t._cleanups=[];let r=m();t._subscriptionSets=[],h(t);try{let s=e();typeof s=="function"&&t._cleanups.push(s)}finally{h(r)}},c=()=>{n||(b(t),G(t))};t._subscriptionSets=[],t._cleanups=[],t();let u=()=>{if(n)return;n=!0;let o=t,r=o._subscriptionSets;if(r){for(let s of r)s.delete(t);r.length=0}b(o),g(c)};return _&&_.addDisposer(u),u}function L(e,n){let t=typeof n=="function",c=t?e:()=>{},u=t?n:e,[o,r]=E({data:void 0,loading:!1,error:void 0}),s={current:()=>{}},l=0;return x(()=>{let S=++l,y=c();return s.current=()=>{r(f=>({...f,loading:!0,error:void 0})),Promise.resolve(u(y)).then(f=>{S===l&&r({data:f,loading:!1,error:void 0})}).catch(f=>{S===l&&r(W=>({...W,loading:!1,error:f}))})},s.current(),()=>{l=-1}}),p(()=>({...o(),refetch:()=>s.current()}))}export{L as createResource};
//# sourceMappingURL=resource.js.map
